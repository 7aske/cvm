#include <stdlib.h>

#include "instr.h"
#include "vm.h"

int main() {
	uint32_t code[] = {
			0x00020048,
			0x00140000,
			0x00020065,
			0x00140001,
			0x0002006c,
			0x00140002,
			0x0002006c,
			0x00140003,
			0x0002006f,
			0x00140004,
			0x00020020,
			0x00140005,
			0x00020057,
			0x00140006,
			0x0002006f,
			0x00140007,
			0x00020072,
			0x00140008,
			0x0002006c,
			0x00140009,
			0x00020064,
			0x0014000a,
			0x00020021,
			0x0014000b,
			0x0002000a,
			0x0014000c,
			// print start
			0x00130000,
			0x00090000,
			0x00130001,
			0x00090000,
			0x00130002,
			0x00090000,
			0x00130003,
			0x00090000,
			0x00130004,
			0x00090000,
			0x00130005,
			0x00090000,
			0x00130006,
			0x00090000,
			0x00130007,
			0x00090000,
			0x00130008,
			0x00090000,
			0x00130009,
			0x00090000,
			0x0013000a,
			0x00090000,
			0x0013000b,
			0x00090000,
			0x0013000c,
			0x00090000,
			0x00010000,
	};
	uint32_t* codeptr = malloc(sizeof(code));
	memcpy(codeptr, code, sizeof(code));
	VM* vm = vm_new(codeptr, sizeof(code) / sizeof(uint32_t));
	vm_run(vm);
	return 0;
}